(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function I(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=I(e);fetch(e.href,o)}})();const M="RGAPI-b9406919-3132-4259-a5d7-5da1ea90d102",c="https://cors-anywhere.herokuapp.com/",d={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36","Accept-Language":"ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7","Accept-Charset":"application/x-www-form-urlencoded; charset=UTF-8",Origin:"https://developer.riotgames.com","X-Riot-Token":M},N="전세민",j="KR1",q=encodeURIComponent(N);async function P(){console.log("전적 데이터를 가져옵니다.");const s=await A(),n=await fetch(`${c}https://asia.api.riotgames.com/riot/account/v1/accounts/by-riot-id/${q}/${j}`,{method:"GET",headers:d});if(!n.ok){console.log("Response status:",n.status);const t=await n.text();throw console.error("Error response:",t),new Error(t)}const i=(await n.json()).puuid,e=await fetch(`${c}https://kr.api.riotgames.com/lol/summoner/v4/summoners/by-puuid/${i}`,{method:"GET",headers:d});if(!e.ok){console.log("Response status:",e.status);const t=await e.text();throw console.error("Error response:",t),new Error(t)}const o=await e.json(),l=o.profileIconId,b=`https://ddragon.leagueoflegends.com/cdn/${s}/img/profileicon/${l}.png`,E=document.getElementById("profileIcon");E.src=b,E.alt="Profile Icon";const m=await fetch(`${c}https://kr.api.riotgames.com/lol/league/v4/entries/by-summoner/${o.id}`,{method:"GET",headers:d});if(!m.ok){console.log("Response status:",m.status);const t=await m.text();throw console.error("Error response:",t),new Error(t)}const a=await m.json(),g=a[0].tier,T=a[0].rank,L=a[0].leaguePoints,x=a[0].wins,$=a[0].losses,O=a[0].queueType,R=`shared/img/rank/Rank=${g}.png`,h=document.getElementById("rankImage");h.src=R,h.alt=`${g} ${T} 이미지`,h.onerror=()=>{console.error("이미지를 로드하는데 실패했습니다:",R)},document.getElementById("queueType").innerText=O,document.getElementById("tier").innerText=g,document.getElementById("rank").innerText=T,document.getElementById("leaguePoints").innerText=L,document.getElementById("wins").innerText=x,document.getElementById("losses").innerText=$;const k=x+$,B=Math.floor(k/100),D=k%100,u=[];for(let t=0;t<=B;t++){const r=t*100,p=await fetch(`${c}https://asia.api.riotgames.com/lol/match/v5/matches/by-puuid/${i}/ids?type=ranked&start=${r}&count=${t!==B?100:D}`,{headers:d});if(!p.ok){console.log("Response status:",p.status);const v=await p.text();throw console.error("Error response:",v),new Error(v)}const G=await p.json();u.push(...G)}if(console.log(u),u.length>0){const t=await fetch(`${c}https://asia.api.riotgames.com/lol/match/v5/matches/${u[0]}`,{headers:d});if(!t.ok){console.log("Match Detail Response status:",t.status);const y=await t.text();throw console.error("Error response:",y),new Error(y)}const r=await t.json();console.log("Recent Match Result:",r),document.getElementById("matchId").innerText=`Match ID: ${r.metadata.matchId}`,document.getElementById("gameMode").innerText=`게임 모드: ${r.info.gameMode}`,document.getElementById("endOfGameResult").innerText=`결과: ${r.info.teams[0].win?"승리":"패배"}`,document.getElementById("gameDuration").innerText=`지속 시간: ${r.info.gameDuration}초`,document.getElementById("mapId").innerText=`맵: ${r.info.mapId}`}else console.log("No matches found.")}async function A(){const s=await fetch(`${c}https://ddragon.leagueoflegends.com/api/versions.json`);if(!s.ok)throw new Error("Failed to fetch the latest patch version");return(await s.json())[0]}let w=!1;const f=document.getElementById("countdown");document.getElementById("gameName").innerText="전세민";document.getElementById("tagLine").innerText="KR1";P();refreshButton.addEventListener("click",async()=>{if(w)return;w=!0,refreshButton.disabled=!0,await P();let s=14;f.style.display="block",f.innerText=`재시도 가능: ${s}초`;const n=setInterval(()=>{s-=1,f.innerText=`재시도 가능: ${s}초`,s<=0&&(clearInterval(n),f.style.display="none",w=!1,refreshButton.disabled=!1)},1e3)});

(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function w(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=w(e);fetch(e.href,o)}})();const M="RGAPI-b9406919-3132-4259-a5d7-5da1ea90d102",l={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36","Accept-Language":"ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7","Accept-Charset":"application/x-www-form-urlencoded; charset=UTF-8",Origin:["https://developer.riotgames.com"],"X-Riot-Token":M},N="전세민",O="KR1",j=encodeURIComponent(N);async function v(){console.log("전적 데이터를 가져옵니다.");const r=await q(),n=await fetch(`/puuid/riot/account/v1/accounts/by-riot-id/${j}/${O}`,{method:"GET",headers:l});if(!n.ok){console.log("Response status:",n.status);const t=await n.text();throw console.error("Error response:",t),new Error(t)}const c=(await n.json()).puuid,e=await fetch(`/id/lol/summoner/v4/summoners/by-puuid/${c}`,{method:"GET",headers:l});if(!e.ok){console.log("Response status:",e.status);const t=await e.text();throw console.error("Error response:",t),new Error(t)}const o=await e.json(),i=o.profileIconId,b=`https://ddragon.leagueoflegends.com/cdn/${r}/img/profileicon/${i}.png`,I=document.getElementById("profileIcon");I.src=b,I.alt="Profile Icon";const d=await fetch(`/id/lol/league/v4/entries/by-summoner/${o.id}`,{method:"GET",headers:l});if(!d.ok){console.log("Response status:",d.status);const t=await d.text();throw console.error("Error response:",t),new Error(t)}const a=await d.json(),f=a[0].tier,E=a[0].rank,P=a[0].leaguePoints,T=a[0].wins,x=a[0].losses,L=a[0].queueType,R=`shared/img/rank/Rank=${f}.png`,g=document.getElementById("rankImage");g.src=R,g.alt=`${f} ${E} 이미지`,g.onerror=()=>{console.error("이미지를 로드하는데 실패했습니다:",R)},document.getElementById("queueType").innerText=L,document.getElementById("tier").innerText=f,document.getElementById("rank").innerText=E,document.getElementById("leaguePoints").innerText=P,document.getElementById("wins").innerText=T,document.getElementById("losses").innerText=x;const k=T+x,B=Math.floor(k/100),D=k%100,u=[];for(let t=0;t<=B;t++){const s=t*100,m=await fetch(`/puuid/lol/match/v5/matches/by-puuid/${c}/ids?type=ranked&start=${s}&count=${t!==B?100:D}`,{headers:l});if(!m.ok){console.log("Response status:",m.status);const $=await m.text();throw console.error("Error response:",$),new Error($)}const G=await m.json();u.push(...G)}if(console.log(u),u.length>0){const t=await fetch(`/puuid/lol/match/v5/matches/${u[0]}`,{headers:l});if(!t.ok){console.log("Match Detail Response status:",t.status);const h=await t.text();throw console.error("Error response:",h),new Error(h)}const s=await t.json();console.log("Recent Match Result:",s),document.getElementById("matchId").innerText=`Match ID: ${s.metadata.matchId}`,document.getElementById("gameMode").innerText=`게임 모드: ${s.info.gameMode}`,document.getElementById("endOfGameResult").innerText=`결과: ${s.info.teams[0].win?"승리":"패배"}`,document.getElementById("gameDuration").innerText=`지속 시간: ${s.info.gameDuration}초`,document.getElementById("mapId").innerText="맵"}else console.log("No matches found.")}async function q(){const r=await fetch("https://ddragon.leagueoflegends.com/api/versions.json");if(!r.ok)throw new Error("Failed to fetch the latest patch version");return(await r.json())[0]}let y=!1;const p=document.getElementById("countdown");document.getElementById("gameName").innerText="전세민";document.getElementById("tagLine").innerText="KR1";v();refreshButton.addEventListener("click",async()=>{if(y)return;y=!0,refreshButton.disabled=!0,await v();let r=14;p.style.display="block",p.innerText=`재시도 가능: ${r}초`;const n=setInterval(()=>{r-=1,p.innerText=`재시도 가능: ${r}초`,r<=0&&(clearInterval(n),p.style.display="none",y=!1,refreshButton.disabled=!1)},1e3)});
